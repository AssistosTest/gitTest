<!DOCTYPE html>
<html lang="en">
<body>
   

    <main>
        <div class="doc-layout">
            <aside class="sidebar">
                <h3>Document Management</h3>
           
               
            </aside>
           
                </div>

                <div class="doc-section" id="data-model">
                    <h2>The Document Data Model</h2>
                    <p>When a Markdown file is loaded, it is transformed into a rich, in-memory representation. This process, known as <strong>hydration</strong>, is handled by the <code>DocumentStore</code> service. The <code>hydrateDocumentModel</code> function enriches the document with metadata, comments, references, and other structured data, creating a hierarchical model that the UI components can interact with.</p>
                    <p><strong>Example:</strong> A file with <code>&lt;!--{"achiles-ide-document": {"id": "guide", "title": "My Guide"}}--&gt;</code> and chapter/paragraph comments is hydrated into a document with <code>docId = "guide"</code>, chapters built from comments or headings, and paragraph records carrying <code>text</code> and <code>commands</code>.</p>
                    <h3>Full document example</h3>
<pre><code>&lt;!-- {"achiles-ide-document":{"id":"L2RvY3VtZW50cy9kb2MubWQ=","title":"doc","infoText":"this is example document","comments":{"toc":{"collapsed":false},"tor":{"collapsed":false,"references":[{"id":"1765191283759","type":"journal","authors":"Smith, J. R., & Doe, A. B.","year":2024,"title":"The Evolving Role of Machine Learning in Predictive Modeling.","pages":"112-135","url":"International Journal of Technological Research,"},{"id":"1765191353867","type":"book","authors":"Johnson, K. T.","year":2022,"title":"Principles of Modern Data Structures and Algorithms.","publisher":"Technical Press Inc.","location":"New York, NY."}]}},"version":1,"updatedAt":"2025-12-08T11:02:37.023Z"}} --&gt;
# Demo Document

This is a demonstration of a structured Markdown document in the Achilles IDE.

## Table of Contents
- [Chapter 1: Introduction](#chapter-chapter-7ee41719-ab70-4cf2-9286-2a65534c9512)
- [Chapter 2: Advanced Features](#chapter-chapter-2)

&lt;!-- {"achiles-ide-chapter":{"id":"chapter-7ee41719-ab70-4cf2-9286-2a65534c9512","title":"Introduction","commands":"@media_image_dcfb80 attach id 512e672bd91e9861eb0f21e2dedd943d6257c123afde52c3 name trevi.jpg width 669 height 446 size 92987\n","comments":{"status":"ok","plugin":"edit-variables","pluginLastOpened":"edit-variables","collapsed":false},"anchorId":"chapter-chapter-7ee41719-ab70-4cf2-9286-2a65534c9512"}} --&gt;
&lt;a id="chapter-chapter-7ee41719-ab70-4cf2-9286-2a65534c9512"&gt;&lt;/a&gt;
## Introduction
&lt;!-- {"achiles-ide-paragraph":{"id":"paragraph-e696c9a7-8db8-4722-a693-1ba44ea64ebd","type":"markdown","commands":"@media_image_50a8ed attach id cea79d6a5e6b48dd4130f85d04c4476fda6655514bba082e name trevi.jpg width 669 height 446 size 92987\n","comments":{"status":"ok","plugin":"edit-variables","pluginLastOpened":"edit-variables"},"title":"Paragraph 1"}} --&gt;
This is the first paragraph of the introduction. It explains the purpose of this document. The structured nature of this file allows for context-aware plugins and actions.

&lt;!-- {"achiles-ide-paragraph":{"id":"paragraph-2","type":"markdown","commands":"@test_var := test_value\n","comments":{"status":"ok","plugin":"edit-variables","pluginLastOpened":"edit-variables"},"title":"Paragraph 2"}} --&gt;
This second paragraph can have its own set of comments, references, and embedded commands.


&lt;!-- {"achiles-ide-chapter":{"id":"chapter-2","title":"Advanced Features","comments":{"collapsed":true},"anchorId":"references-section"}} --&gt;
&lt;a id="references-section"&gt;&lt;/a&gt;
## Advanced Features
&lt;!-- {"achiles-ide-paragraph":{"id":"paragraph-3","type":"markdown","title":"SOPLang Commands"}} --&gt;
This paragraph demonstrates an embedded SOPLang command for media. While it appears as a command here, the IDE will render it as a rich media element.

&lt;!-- {"achiles-ide-paragraph":{"id":"paragraph-4","type":"markdown","comments":{"status":"ok","plugin":"edit-variables","pluginLastOpened":"edit-variables"},"title":"Another Paragraph"}} --&gt;
This paragraph contains a command that will be parsed by the system.


&lt;!-- &lt;achiles-ide-references&gt; --&gt;
&lt;a id="references-section"&gt;&lt;/a&gt;
## References
1. Smith, J. R., & Doe, A. B. (2024). The Evolving Role of Machine Learning in Predictive Modeling.. International Journal of Technological Res
</code></pre>
                    <div class="doc-section">
                        <h3>Document editing views (screens)</h3>
                        <p>Visual examples of the structured Markdown editor and general editor modes.</p>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;">
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/edit_md_add_item.png" src="./assets/edit_md_add_item.png" alt="Add item in Markdown editor" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">Add chapter/paragraph in Markdown mode.</figcaption>
                        </figure>
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/edit_md_c.png" src="./assets/edit_md_c.png" alt="Chapter edit UI" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">Editing a chapterâ€™s metadata.</figcaption>
                        </figure>
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/edit_md_p.png" src="./assets/edit_md_p.png" alt="Paragraph edit UI" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">Editing a paragraph and commands.</figcaption>
                        </figure>
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/document_edit_1.png" src="./assets/document_edit_1.png" alt="Document edit layout" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">Document edit layout with toolbar.</figcaption>
                        </figure>
                    </div>
                </div>
                </div>

                






                
                <div class="doc-section" id="doc-info">
                    <h2>Document Info</h2>
                    <p>Each document contains a set of metadata that provides essential information about it. This includes the document's <strong>Title</strong> and a summary or abstract in the <strong>Info Text</strong> field. This data is managed within the document's metadata and can be edited through the UI to provide context for the document's content.</p>
                    <p><strong>Example (metadata block):</strong></p>
<pre><code>&lt;!-- {"achiles-ide-document":{"id":"L2RvY3VtZW50cy9kb2MubWQ=","title":"doc","infoText":"this is example document", ... }} --&gt;</code></pre>
                    <p><strong>Example (UI):</strong> In the info pane, set Title to "Release Notes" and Info Text to "Changelog for v1.2"; these values are saved back into the document metadata.</p>
                </div>

                <div class="doc-section" id="toc">
                    <h2>Table of Contents</h2>
                    <p>The Explorer automatically generates a navigable <strong>Table of Contents</strong> for each document. This is handled by the <code>contents-table</code> component, which reads the document's structure from the hydrated data model.</p>
                    <div class="subsection">
                        <p>The table is generated from the <code>chapters</code> array in the document model and uses each chapter's <code>headingText</code> and <code>headingLevel</code> to build an interactive outline.</p>
                        <p>Selecting an item in the Table of Contents scrolls the corresponding chapter into view.</p>
                    </div>
                    <p><strong>Example:</strong></p>
<pre><code>## Table of Contents
- [Chapter 1: Introduction](#chapter-chapter-7ee41719-ab70-4cf2-9286-2a65534c9512)
- [Chapter 2: Advanced Features](#chapter-chapter-2)</code></pre>
                </div>
                
                <div class="doc-section" id="comments">
                    <h2>Comments</h2>
                    <p>The IDE supports a commenting system that allows users to attach feedback to the document as a whole, or to specific chapters and paragraphs. The <code>comments-section</code> component is responsible for displaying and managing these comments.</p>
                    <div class="subsection">
                        <p>Comments live in the <code>comments</code> array within the metadata of the document, chapter, or paragraph they belong to, enabling collaborative review in context.</p>
                    </div>
                    <p><strong>Example:</strong></p>
<pre><code>"comments": {
  "messages": [
    { "id": "CUZbVGCN", "userEmail": "local@example.com", "message": "demo comment" }
  ]
}</code></pre>
                    <p>Add a paragraph-level comment like "Clarify API version" on the introduction; it is stored with that paragraph and shown inline in the comments panel.</p>
                </div>

                <div class="doc-section" id="references">
                    <h2>References</h2>
                    <p>A built-in reference management system allows you to cite sources and manage bibliographic information. The <code>references-table</code> component provides the interface for this feature.</p>
                    <div class="subsection">
                        <p>References are stored in a <code>references</code> array within the document metadata, so citations remain centralized and reusable across the document.</p>
                    </div>
                    <p><strong>Example snippet:</strong></p>
<pre><code>## References
1. Smith, J. R., &amp; Doe, A. B. (2024). The Evolving Role of Machine Learning in Predictive Modeling.. International Journal of Technological Research,
2. Johnson, K. T. (2022). *Principles of Modern Data Structures and Algorithms.*. New York, NY.: Technical Press Inc..</code></pre>
                </div>

                <div class="doc-section" id="advanced-features">
                    <h2>Advanced Features: Snapshots, Tasks, and Variables</h2>
                    <p>The document model also supports several advanced features for automation and version control:</p>
                    <div class="subsection">
                        <p><strong>Snapshots & Versioning:</strong> The <code>version</code> and <code>snapshots</code> properties provide lightweight versioning; the snapshots modal lets you view or revert states.</p>
                        <p><strong>Tasks:</strong> The <code>tasks</code> property tracks to-dos associated with a document, surfaced through the tasks modal.</p>
                        <p><strong>Variables:</strong> The <code>variables</code> property holds dynamic data consumed by SOPLang scripts and other automations; the variable details component lets you inspect and edit them.</p>
                    </div>
                    <p><strong>Example:</strong> Capture a snapshot before major edits, add a task "Update diagrams" in the tasks modal, and define a variable <code>releaseVersion=1.2.0</code> for SOPLang-driven templates.</p>
                </div>

                <div class="doc-section" id="other-files">
                    <h2>Editing Other File Types (Text, Code, etc.)</h2>
                    <p>In addition to its specialized Markdown editor, the Explorer Agent includes a general-purpose text editor for handling other file types. This allows you to view and edit a wide range of text-based files directly within the IDE.</p>

                    <h3>Supported Files:</h3>
                    <div class="subsection">
                        <p>Plain text files (<code>.txt</code>), code files (<code>.js</code>, <code>.html</code>, <code>.css</code>, <code>.py</code>, etc.), and configuration files (<code>.json</code>, <code>.xml</code>, <code>.yml</code>, etc.) all open in the general editor.</p>
                    </div>
                    <p><strong>Example:</strong> Open <code>config/app.json</code> to view or edit JSON; open <code>src/main.js</code> to edit code with syntax highlighting; both use the general editor (no document DOM).</p>

                    <h3>The Key Difference: Plain Text vs. Structured Data</h3>
                    <div class="subsection">
                        <p><strong>Plain Text Handling:</strong> When you open a <code>.js</code> or <code>.txt</code> file, it is treated as a single block of text; no chapters or paragraphs are parsed.</p>
                        <p><strong>No DOM or Plugin Context:</strong> Non-Markdown files do not expose the structured DOM, so paragraph-level plugins or SOPLang commands do not apply the same way.</p>
                        <p><strong>Underlying MCP Tools:</strong> Interactions rely on filesystem MCP tools such as <code>read_text_file</code> and <code>write_file</code>, providing raw, direct file access within allowed roots.</p>
                    </div>

                    <h3>Syntax Highlighting</h3>
                    <p>While these files are treated as plain text from a structural point of view, the editor provides a crucial presentation-layer feature: <strong>syntax highlighting</strong>. When you open a code file (e.g., <code>.js</code>, <code>.html</code>, <code>.css</code>), the editor automatically detects the language and applies color coding to keywords, strings, comments, and other language constructs.</p>
                    <p>This feature significantly improves readability and makes it easier to work with code, but it's important to remember that this is a client-side rendering enhancement. It does not change the fact that the underlying file is treated as a simple block of text, unlike the deep structural parsing applied to <code>.md</code> files.</p>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;margin-top:1rem;">
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/edit_js.png" src="./assets/edit_js.png" alt="Code file in general editor" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">General editor rendering a JS file.</figcaption>
                        </figure>
                        <figure style="background:var(--bg-primary);border:1px solid var(--border-primary);border-radius:12px;padding:0.75rem;">
                            <img class="doc-shot" data-full="./assets/edit_txt.png" src="./assets/edit_txt.png" alt="Text file in general editor" style="width:100%;border-radius:8px;border:1px solid var(--border-secondary);background:var(--bg-secondary);cursor:pointer;">
                            <figcaption style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">Plain text editing mode.</figcaption>
                        </figure>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
        <p>&copy; 2025 <a href="https://github.com/OutfinityResearch/ploinky/blob/master/README.md" target="_blank" rel="noopener noreferrer">Ploinky Project</a>. All rights reserved.</p>
    </div>
</footer>

<div id="docLightbox" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:2000;align-items:center;justify-content:center;padding:2rem;">
    <span data-close style="position:absolute;top:1.5rem;right:2rem;font-size:2rem;color:#fff;cursor:pointer;">&times;</span>
    <img id="docLightboxImage" alt="Document screenshot" style="max-width:90vw;max-height:90vh;border-radius:12px;border:1px solid var(--border-primary);box-shadow:var(--shadow-lg);background:var(--bg-secondary);">
</div>

<script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const themes = ['light', 'dark', 'blue'];
        const themeIcons = {
            light: 'ðŸŒ™', // Icon to show for switching to dark
            dark: 'ðŸ”µ',  // Icon to show for switching to blue
            blue: 'â˜€ï¸'   // Icon to show for switching to light
        };

        const applyTheme = (theme) => {
            body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            themeToggle.textContent = themeIcons[theme];
        };
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const currentIndex = themes.indexOf(currentTheme);
        const nextIndex = (currentIndex + 1) % themes.length;
        const newTheme = themes[nextIndex];
        applyTheme(newTheme);
    });

    // Lightbox for document screenshots
    const docLightbox = document.getElementById('docLightbox');
    const docLightboxImg = document.getElementById('docLightboxImage');
    document.querySelectorAll('.doc-shot').forEach(img => {
        img.addEventListener('click', () => {
            docLightboxImg.src = img.dataset.full || img.src;
            docLightbox.style.display = 'flex';
        });
    });
    docLightbox.addEventListener('click', (e) => {
        if (e.target === docLightbox || e.target.hasAttribute('data-close')) {
            docLightbox.style.display = 'none';
            docLightboxImg.src = '';
        }
    });
</script>
</body>
</html>
